<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Nuestra historia</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  font-family:'Poppins',sans-serif;
  background:linear-gradient(180deg,#ffd6e0,#ffe4ec,#fff);
  color:#4a2c2a;
  overflow:hidden;
}

.scene{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:40px 20px;
  opacity:0;
  transform:scale(.96);
  pointer-events:none;
  transition:opacity 1.6s ease, transform 1.6s ease;
}

.scene.active{
  opacity:1;
  transform:scale(1);
  pointer-events:auto;
}

.container{
  max-width:900px;
  width:100%;
  text-align:center;
}

h1,h2{
  font-family:'Playfair Display',serif;
  margin-bottom:20px;
}

h1{font-size:2.6rem}
h2{font-size:2.1rem}

p{
  font-size:1.15rem;
  line-height:1.9;
  margin-bottom:20px;
}

button{
  padding:14px 42px;
  border-radius:40px;
  border:none;
  font-size:1.1rem;
  cursor:pointer;
  transition:.3s;
}

.primary{
  background:linear-gradient(135deg,#ff6f91,#ff9ebc);
  color:white;
  box-shadow:0 15px 35px rgba(255,111,145,.5);
}

.primary:hover{transform:scale(1.08)}

.secondary{
  background:#ddd;
  color:#555;
  position:absolute;
}

.gallery{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:22px;
  margin-top:30px;
}

.gallery img{
  width:100%;
  border-radius:20px;
  box-shadow:0 18px 35px rgba(0,0,0,.15);
}

/* ðŸ’– Corazones */
.heart{
  position:fixed;
  bottom:-40px;
  color:#ff6f91;
  font-size:20px;
  animation:float 8s linear infinite;
  opacity:.7;
}

@keyframes float{
  from{transform:translateY(0) scale(1)}
  to{transform:translateY(-110vh) scale(1.4)}
}

/* âœ¨ IluminaciÃ³n lateral */
#lights{
  display:none;
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle at left,rgba(255,180,200,.55),transparent 60%),
    radial-gradient(circle at right,rgba(255,180,200,.55),transparent 60%);
  pointer-events:none;
}

canvas{
  position:fixed;
  inset:0;
  pointer-events:none;
}

@media(max-width:600px){
  h1{font-size:2.1rem}
  h2{font-size:1.8rem}
  p{font-size:1.05rem}
}
</style>
</head>

<body>

<audio id="lofi" loop>
  <source src="lofi.mp3" type="audio/mpeg">
</audio>

<audio id="musica">
  <source src="musica.mp3" type="audio/mpeg">
</audio>

<div id="lights"></div>
<canvas id="confetti"></canvas>

<!-- ESCENA 1 -->
<section class="scene active" id="scene1">
  <div class="container">
    <h1>Para ti</h1>
    <p>
      QuerÃ­a encontrar una forma especial de decirte algo.<br>
      Algo que no se resume en palabras simples.<br><br>
      AsÃ­ que hice estoâ€¦ solo para ti.
    </p>
    <button class="primary" onclick="nextScene(2); startLofi()">Continuar</button>
  </div>
</section>

<!-- ESCENA 2 -->
<section class="scene" id="scene2">
  <div class="container">
    <h2>Lo que siento</h2>
    <p>
      Con el tiempo entendÃ­ que no eras solo alguien importante.<br>
      Eras el lugar donde quiero quedarme.
    </p>
    <button class="primary" onclick="nextScene(3)">Siguiente</button>
  </div>
</section>

<!-- ESCENA 3 -->
<section class="scene" id="scene3">
  <div class="container">
    <h2>Nosotros</h2>
    <p>
      Prometo cuidarte, escucharte y elegirte<br>
      incluso en los dÃ­as mÃ¡s cansados.
    </p>

    <div class="gallery">
      <img src="imagen1.jpg">
      <img src="imagen2.jpg">
      <img src="imagen3.jpg">
      <img src="imagen4.jpg">
      <img src="imagen5.jpg">
    </div>

    <button class="primary" onclick="nextScene(4)">Hay algo mÃ¡sâ€¦</button>
  </div>
</section>

<!-- ESCENA 4 -->
<section class="scene" id="scene4">
  <div class="container">
    <h1>Esperanza</h1>
    <p>Con todo lo que soy y todo lo que sientoâ€¦</p>
    <h2>Â¿Quieres ser mi polola?</h2>

    <button class="primary" onclick="sayYes()">SÃ­ ðŸ’–</button>
    <button class="secondary" id="noBtn">No</button>
  </div>
</section>

<!-- FINAL -->
<section class="scene" id="scene5">
  <div class="container">
    <h1>ðŸ’– Ella dijo que sÃ­ ðŸ’–</h1>
    <p>CapÃ­tulo 1</p>
    <h2>Ignacio & Esperanza</h2>
    <p>Una historia que reciÃ©n comienza.</p>
  </div>
</section>

<script>
let current=1;

function nextScene(n){
  document.getElementById("scene"+current).classList.remove("active");
  document.getElementById("scene"+n).classList.add("active");
  current=n;
}

function startLofi(){
  const l=document.getElementById("lofi");
  l.volume=.4;
  l.play().catch(()=>{});
}

function crossfade(){
  const l=document.getElementById("lofi");
  const m=document.getElementById("musica");
  m.volume=0;
  m.play();
  let v=0;
  const f=setInterval(()=>{
    v+=.02;
    l.volume=Math.max(0,l.volume-.02);
    m.volume=Math.min(1,v);
    if(v>=1){l.pause();clearInterval(f);}
  },100);
}

function sayYes(){
  crossfade();
  document.getElementById("lights").style.display="block";
  startHearts();
  confetti();
  nextScene(5);
}

const noBtn=document.getElementById("noBtn");
noBtn.addEventListener("mouseover",()=>{
  noBtn.style.left=Math.random()*70+"%";
  noBtn.style.top=Math.random()*70+"%";
});

function startHearts(){
  setInterval(()=>{
    const h=document.createElement("div");
    h.className="heart";
    h.innerHTML="ðŸ’–";
    h.style.left=Math.random()*100+"vw";
    h.style.fontSize=20+Math.random()*20+"px";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),8000);
  },400);
}

function confetti(){
  const c=document.getElementById("confetti");
  const x=c.getContext("2d");
  c.width=innerWidth;c.height=innerHeight;
  const p=Array.from({length:180},()=>({
    x:Math.random()*c.width,
    y:Math.random()*c.height,
    v:Math.random()*3+2
  }));
  (function draw(){
    x.clearRect(0,0,c.width,c.height);
    p.forEach(o=>{
      o.y+=o.v;
      x.fillStyle="#ff6f91";
      x.fillRect(o.x,o.y,6,6);
      if(o.y>c.height)o.y=0;
    });
    requestAnimationFrame(draw);
  })();
}
</script>

</body>
</html>
